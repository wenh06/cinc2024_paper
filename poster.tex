%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% NIWeek 2014 Poster by T. Reveyrand
% www.microwave.fr
% http://www.microwave.fr/LaTeX.html
% ---------------------------------------
%
% Original template created by:
% Brian Amberg (baposter@brian-amberg.de)
%
% This template has been downloaded from:
% http://www.LaTeXTemplates.com
%
% License:
% CC BY-NC-SA 3.0 (http://creativecommons.org/licenses/by-nc-sa/3.0/)
%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

%----------------------------------------------------------------------------------------
%	PACKAGES AND OTHER DOCUMENT CONFIGURATIONS
%----------------------------------------------------------------------------------------

\documentclass[a0paper,portrait]{baposter}

\input{preamble}

\usepackage{textcomp}

\usepackage{hyperref}

\graphicspath{{images/}} % Directory in which figures are stored

 \definecolor{bordercol}{RGB}{40,40,40} % Border color of content boxes
 \definecolor{headercol1}{RGB}{186,215,230} % Background color for the header in the content boxes (left side)
 \definecolor{headercol2}{RGB}{120,120,120} % Background color for the header in the content boxes (right side)
 \definecolor{headerfontcol}{RGB}{0,0,0} % Text color for the header text in the content boxes
 \definecolor{boxcolor}{RGB}{210,235,250} % Background color for the content in the content boxes

\definecolor{jdhblue}{RGB}{2,93,186}

\definecolor{zkblue}{RGB}{88,135,175}
\definecolor{zkbackground}{RGB}{230,232,234}


% \usetikzlibrary{shapes, arrows, external, decorations.pathmorphing, backgrounds, positioning, fit, petri, calc, hobby, cd}


\begin{document}

% \background{ % Set the background to an image (background.pdf)
% \begin{tikzpicture}[remember picture,overlay]
% \draw (current page.north west)+(-2em,2em) node[anchor=north west]
% {\includegraphics[height=1.1\textheight]{images/baposter_background.pdf}};
% \end{tikzpicture}
% }

\begin{poster}{
grid=false,
borderColor=bordercol, % Border color of content boxes
headerColorOne=headercol1, % Background color for the header in the content boxes (left side)
headerColorTwo=headercol2, % Background color for the header in the content boxes (right side)
headerFontColor=headerfontcol, % Text color for the header text in the content boxes
% boxColorOne=boxcolor, % Background color for the content in the content boxes
boxColorOne=zkbackground,
headershape=roundedright, % Specify the rounded corner in the content box headers
headerfont=\Large\sf\bf, % Font modifiers for the text in the content box headers
textborder=rectangle,
% background=user,
background=none,
headerborder=open, % Change to closed for a line under the content box headers
boxshade=plain
}
%
%----------------------------------------------------------------------------------------
%	TITLE AND AUTHOR NAME
%----------------------------------------------------------------------------------------
%
{\includegraphics[scale=0.101]{logo_tmu.jpeg}} % University/lab logo
{
{\bf \fontsize{19pt}{19pt} \selectfont A Multi-Stage Framework for Simultaneous Digitization and Classification of Electrocardiogram Images}
} % Poster title
{\vspace{0.3em} \smaller Jingsu KANG$^1$, Hao WEN$^2$  \\  % Author names

$^1${\it Tianjin Medical University}\qquad
$^2${\it College of Science, China Agricultural University} \\
\vspace{0.2cm}
{\Large \bf{The George B. Moody PhysioNet Challenge 2024}, ~~~\bf{Team Revenger}}
}
{\includegraphics[scale=0.401]{images/logo_cau_science.png}}


\newif\ifcoloredtext
\coloredtexttrue
\newif\ifboxednn
\boxednntrue


%----------------------------------------------------------------------------------------
%	INTRODUCTION
%----------------------------------------------------------------------------------------

\headerbox{Introduction}{name=introduction, column=0, row=0, span=3}{
% finished

\begin{itemize}
\item We propose a \textbf{multi-stage framework} to digitize and classify ECG images concurrently. The framework consists of 3 modules: (1) Region of Interest (ROI) extraction, (2) Arrhythmia classification, and (3) ECG waveform digitization
\vspace{-0.2cm}
\item The ROI extraction module uses a DETR model with a ResNet-50 backbone to locate the ECG region. The classification module uses a lightweight ConvNeXt model to classify the ECG signal. The digitization module uses a U-Net model to extract the ECG waveform from the ROI.
\vspace{-0.2cm}
\item The digitization task involves a highly unbalanced segmentation problem, where the ECG waveforms occupy a small portion of the image. We propose a novel loss function to address this issue.
\end{itemize}
}

%----------------------------------------------------------------------------------------
%	Framework
%----------------------------------------------------------------------------------------

\headerbox{The Multi-Stage Framework}{name=framework, column=0, span=3, row=1, below=introduction}{
% finished

\newif\ifFrameworkFigBox
\FrameworkFigBoxfalse

\begin{center}
\input{tikz_plots/multi-stage-framework}
\end{center}

}

%----------------------------------------------------------------------------------------
%	Preprocessing
%----------------------------------------------------------------------------------------

\headerbox{Training Data Preparation}{name=data, column=0, row=1, span=2, below=framework}{
% finished

\begin{itemize}
\item ECG-Image-Kit to generate ECG images from the PTB-XL dataset for our method development. Additionally, the PTB-XL+ dataset was used to generate classification labels.
\vspace{-0.2cm}
\item Image generation setup included augmentations such as random Gaussian noise, random color temperature adjustments, and distortions including handwritten notes, wrinkles, and creases.
\vspace{-0.2cm}
\item Bounding boxes for the printed waveforms and lead names, along with the plotted pixel coordinates of the waveforms, were recorded in metadata files alongside the generated images to train object detection models and segmentation models respectively.
\end{itemize}

}


%----------------------------------------------------------------------------------------
%	Model selection
%----------------------------------------------------------------------------------------

\headerbox{Model Selection}{name=nn, column=2, span=1, row = 2, below=framework}{
% NOT finished

\input{tables/model_select_poster}

Models are chosen based on performance, efficiency, and compatibility with ECG image data.

}

%----------------------------------------------------------------------------------------
%	Training Setups
%----------------------------------------------------------------------------------------

% \headerbox{Training Strategies}{name=training, span=1, column=2, row=1, below=framework}{
% finished

% \begin{itemize}
% \item Optimizer: AMSGrad variant of AdamW with OneCycleLR scheduler.
% \vspace{-0.2cm}
% \item Stratified train-validation split (split among patients): 80 \% -- 20 \%.
% \vspace{-0.2cm}
% \item Batch size 32; epoch number $\leq 55$ with early stopping patience 25 epochs.
% \vspace{-0.2cm}
% \item Input length 180s, randomly sliced from one recording and reloads every 5 epochs.
% \end{itemize}
% to write
% }

%----------------------------------------------------------------------------------------
%	Submission Results
%----------------------------------------------------------------------------------------

\headerbox{Submission Results}{name=submission, span=2, column=0, below=data}{
% NOT finished
% TODO: update the scores on the training and cross-val sets

% \renewcommand{\arraystretch}{1.25}
% \begin{center}
% % requires packages boldline, multirow
% \setlength\tabcolsep{4pt}
% % \begin{tabular}{@{\extracolsep{6pt}}c|c|c|c|c@{}}
% \begin{tabular}{c|c|c|c|c}
% \hlineB{3.5}
% & \multicolumn{4}{c}{\textbf{Challenge Scores}} \\ \cline{2-5}
% & \textbf{72 hours} & 12 hours & 24 hours & 48 hours \\ \hline
% Training & 0.814 $\pm$ 0.070 & - & - & - \\
% Cross-validation & 0.424 $\pm$ 0.026 & - & - & - \\ \hline
% Hidden validation & \textbf{0.701} & 0.33 & 0.40 & \textbf{0.75} \\
% Ranking & \textbf{5 / 270} & - & - & - \\
% \hlineB{3.5}
% \end{tabular}
% \end{center}
% \renewcommand{\arraystretch}{1}

% \begin{itemize}
% \item Challenge score and ranking evaluated on the hidden validation set, scores on its truncated 12h / 24h / 48h subsets, and scores on the training and cross-validation sets.
% \vspace{-0.2cm}
% \item Scores on the train and cross-validation sets are of the form $mean \pm std. dev.$ from all our offline experiments with z-score normalization included in the preprocessing pipeline.
% \end{itemize}

\input{tables/final_results}

}

%----------------------------------------------------------------------------------------
%	Limitations, Discussions
%----------------------------------------------------------------------------------------

\headerbox{Discussions and Limitations}{name=discussion, column=0, below=submission, span=3}{
% NOT finished

\begin{itemize}
\item The proposed method is relatively effective in digitizing and classifying ECG images concurrently, achieving an acceptable SNR and F1 score. This multi-stage framework offers a lightweight and efficient solution to this challenge.
\vspace{-0.2cm}
\item There are observable gaps between the SNR metric on the public training data and the hidden validation/test data. A possible reason for this discrepancy is the difference in data distribution (format): training data generated using ECG-Image-Kit all follow the standard 3-by-4 format. The post-processing step after segmentation is designed to handle this specific format. However, the hidden validation/test data may have different formats, e.g. additional full-length waveforms.
\vspace{-0.2cm}
\item Further improvement directions:
\vspace{-0.2cm}
\begin{itemize}
    \item More effective backbone networks or more advanced architectures, including the latest YOLO series models.
    \vspace{-0.1cm}
    \item End-to-end digitization models from the segmented ECG waveform masks or even directly from the ROI can be developed to simplify the pipeline, replacing the current rule-based conversion from pixel coordinates to digitized value.
    \vspace{-0.1cm}
    \item Better handling of rotated ECG images to improve the framework's robustness, using oriented object detection models.
\end{itemize}
\end{itemize}

}


%----------------------------------------------------------------------------------------
%	ACKNOWLEDGEMENTS
%----------------------------------------------------------------------------------------

\headerbox{Acknowledgements}{name=acknowledgements, column=0, below=discussion, span=3}{
% finished
% \smaller
We thank professor {\bf Deren Han} from the School of Mathematical Sciences, Beihang University for providing GPU servers to help accomplish this work.

}

%----------------------------------------------------------------------------------------
%	link to the GitHub repository
%----------------------------------------------------------------------------------------

\headerbox{}{name=foottext, column=0, span=3, below=acknowledgements, textborder=none, headerborder=none,  boxheaderheight=0pt}{
% finished
\hfill \small \textit{Code, configs, etc. available at https://github.com/wenh06/cinc2024, and based on https://github.com/DeepPSP/torch\_ecg.}
}


\end{poster}

\end{document}
